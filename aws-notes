Highly available - System will continue to function despite a failure to any of the components in the underlying achitecture
Fault tolerant - Highly available with no degredation of performance.
Resilant - The power or ability of a material to return to its original form
Availability - Determined by the percentage of uptime (SLA in 9s) of a purticular resource.
Redundant - Mutiple resources performing same task
Scalability - increase the resources horizontally or vertically manual or automatic.
Elasticity - increase or decrease the resource based on load automatically
SLA can be found in - Well architected reliability whitepaper framework pages 54-58 / aws.amazon.com/<service>/sla
Route53 health check graph can give you your application's SLA


HA resilancy notes

Deploying a 3 tier Architecture for Highly available

Network ( VPC)

 AZ - Deploy the compute resources in atleast two AZ for resilancy
 Internet gateway - attached to vpc, highly available , redundent and horizontally scalbale
 VPC Peering connection - No underlying hardware, No bottleneck for scaling the traffic
 VPC End points - Similar to VPC Peering connection
 Virtual Private Gateway - Highly available but not redundent. There is two tunnels deployed in active passive mode in two different AZ.
                            At a time only one of them will be active. Route table should be configured to dynamically pull the routes incase of any failure with one tunnel. 
                            Resilancy will also depend on the complimentary connections and router ( dynamic or static) used in datacenter. The datacenter Customer Gateway should 
                            be configured with two tunnels.If there is a HW outage, it will cause short interuption of service.
 Nat Gateway - Highly available but blongs on one AZ. Best practice is to deploy different NAT Gateway for different Subnet and configure different routing tables for
               each subnet with corresponding gateway routes.There will be short interuption of service if underlying hardware of nat gateway goes off. AWS will replace it with new one.
               Note that Nat instance is deployed into EC2 and may not be a good idea when resilancy is a problem.
 
 
 Compute
 
 Elastic Load Balancers - Select eleastic load balancers to deploy into atleast two AZ.(99.99 Availabilty SLA)
 Auto Scaling - Like load balancing can deploy into multiple AZ. Service is  (99.99 Availabilty SLA) but indvidual compute SLA is 90% SLA. So stateful application will have inflight transaction 
                impact.
                
 Database
 RDS - RDS can be deployed into Multiple AZ but supports only single write end point only available in one zone. Multiple reads are supported. 99.95% uptime. This is where RDS Arrora comes in.
 
 RDS Arrora - Can be deployed into Multiple AZ , supports writes in all nodes while being consistant. Availlability is increased to 99.99% Uptime. 
            - Only support Mysql and Postgres with purticular versions.
            - Self healing, Auto scalable
  
 AWS Serverless Resilant Architecture
               
 DNS
 Route53 - This has 100% SLA with global scope. If it is down, Amazon will pay you.
 
 CDN
 CloudFront - This has 99.99% SLA with global scope.  
 
Storage:
 S3 - Bucket is regional but objects have to choosen to be anything other than one zone. 99.99% SLA

API Front end
API Gateway - Same as S3

Authentication and Authorization
Amazone Cognito - Regional , 99.99. Can be integrated with API Gateway for user authentication.

Compute functions
Lambda -Regional , 99.95% SLA

Database ( No SQL)
Dynamo DB - Regional, 99.99% SLA

Highly available / Fault tolarent section

Cache
ElasticCache - This is backed up by Ec2. Service is highly available but not fault tolerant or redundant.

Redshift - This is desined to be highly performance and is only in one AZ. So it is not HA.

RDS Multi AZ - If primary become degraded or patches, then AWS will failure to read only. But it is not fault tolarent. There will be a interuption in service.

S3 - Servlerless. All good.

DynamoDb - All good.

APIGateway - All Good.

CloudFront - All Good

Route53 - All good.


Zonal Resources section
 EBS Volume
 Nat Gateway
 Ec2
 Redshift Cluster
 RDS instances
 S3 one zone 1A
 Subnets
 
Regional scoped Resources ( Desined for HA and FT)
 All AWS Service end points ( IAM, EC2 service etc)
 S3 ( Except  one zone 1A)
 VPC
 CloudWatch
 Elastic load Balancers
 AutoScalingService
 
Multiple region supported resources.
S3 cross region replication
RDS cross region read replication
DynamoDb - Replication
AWS Edge location

AWS Global supported services
ClodFront53
Route53
WAF filtering rules
Lambda@Edge
Route53- > ClodFront53 - > WAF filtering rules - > Lambda@Edge

 
Decoupling components

Loadbalancers - For DR scenarios, deploy the components in two different regions with two different load balancers pointing to Autoscaling group. The router can be set up with different 
                options to support active active or passive set up. In case of both the regions are down, the router can also point to S3 bucket for a static message.
 
 Client-sns-sqs-autoscaling - This is mentioned but needs to be tried out on how SNS can be used to get client requests. SNS is a push based service , so it can probabliy 
 
Storage:
Instance volume storage - this is an antipattern for resilancy.
EBS - AZ scoped block storage. Kept redundent by replicating automatically to two different EBS in the same AZ. Availability : 4 9s. Durability .1-.2% failure.
      To make it rgional, use point in time snapshot and store it in S3. 
      If possible, do the snapshot back up to two different account so that even if one is gained by attacker, the data can be retreived from another account.
      
EFS - Region scope. Availability : 3 9s and Durability 11 9s. No published data for mount points and mount points are associated with subnets.AWS back up ( take the backup and store to AWS vault) 
                                   or AWS data sync can splicate the data into different region.
                                   
S3
 S3 standard - Region scope. 4 9s of availability and 11 9s of durabilty.
 S3 IA  - Region scope. 3 9s of availability and 11 9s durabilty.
 S3 Inteligent tier - This is a workload and not storage class. The numbers are similar to S3 IA.
 S3 One zone IA - Only one zone. Replicated to 3 times in same az. Durabiulity is same but avialability is 9.95
 
   To improve the durability, create another bucket in another region with versioning enabled. Then enable bucket versioning and cross region replications. 
    This only replicate the objects that  are created or updated after the replication is enabled. you still needs to copy the existing data.
    
 S3 Glacier - Region, numbers are identical to S3 standard. The latency can be from few minutes to few hours. 
 S3 Glacier Deep archieve - Same numbers but the latency is 12 hours

Performance :

Salabaility and Elasticity

EBS vloume size is scalable but not eleastic
unified AutoScaling template allows versioning and can be used to launch auto scaling groups, ECS, Arora read replica. T
hey are eleastic and even can be configured to be elastic based on a prediction with different options of k
eeping maximum scaling to hard limit or equal, above or within a buffer to predictable capacity. They can be also used to scale read/write dynamo DB.
Eleastic managed services for application examples - API gateway, ECS on Fargate, EC2 on Autoscaling, Dynamo DB with Autoscaling for database, Lamda for computing, S3 for storage


Database :

DB can be deployed in EC2 with EBS Volumes with a custom volume manager  - this is a high performant but low recillancy design and high management overhead.. 

Use RDS with read replica to another AZ. - This will take care of reads but not writes

Use Aurora - This will limit the choise to MYSQL and POSTGRES but will give multi master read and write. Using high configuration instance will incrase the performance.

Use Arora serverless - This will give an option for auto scaling and managing from aws.









